# Конфигурационное управление
## Задание 3
### Вариант 15

Разработать инструмент командной строки для учебного конфигурационного
языка, синтаксис которого приведен далее. Этот инструмент преобразует текст из
входного формата в выходной. Синтаксические ошибки выявляются с выдачей
сообщений.
Входной текст на языке toml принимается из файла, путь к которому задан
ключом командной строки. Выходной текст на учебном конфигурационном
языке попадает в стандартный вывод.


Многострочные комментарии:
#|
Это многострочный
комментарий
|#



Массивы:
'( значение значение значение ... )


Имена:
[a-zA-Z][a-zA-Z0-9]*


Значения:
• Числа.
• Строки.
• Массивы.


Строки: "Это строка"


Объявление константы на этапе трансляции: set имя = значение

Вычисление константного выражения на этапе трансляции (постфиксная форма), пример: .[имя 1+].
Результатом вычисления константного выражения является значение.
Для константных вычислений определены операции и функции:
1. Сложение.
2. Вычитание.
3. print().

### Стек технологий
1.	Python 3: Основной язык программирования для обработки XML и генерации конфигурационного файла.
2. toml`: Библиотека Python для парсинга и обработки файлов TOML. Это ключевой компонент, отвечающий за правильное чтение структуры данных из входного файла.

### Описание функционала программы

Программа предназначена для преобразования данных из формата TOML в кастомный конфигурационный язык. Функционал программы включает:

1. Парсинг TOML:

* Чтение входного файла TOML, указанного через аргумент командной строки.
* Удаление многострочных комментариев (`#| ... |#`) из входного TOML файла. Это делается с помощью регулярных выражений.
* Парсинг структуры TOML с помощью библиотеки `toml`.

2. Обработка данных TOML:

* Обработка констант: Программа распознает и вычисляет постфиксные арифметические выражения, заключенные в `.[]`, и объявляет их как константы в выходном языке. Вычисление осуществляется с использованием стека.
* Обработка простых значений: Преобразование числовых, строковых и списковых значений из TOML в соответствующие представления в выходном языке. Строки заключаются в двойные кавычки, списки в скобки `'( ... )'`.
* Генерация выходного текста: Формирование строк в выходном формате: `set <ключ> = <значение>`.

3. Вывод результатов:

* Вывод сгенерированного текста в стандартный поток вывода (stdout).
4. Обработка ошибок:

* Обработка ошибок при чтении входного файла.
* Вывод сообщения об ошибке и завершение работы программы, если встречен неизвестный токен в постфиксном выражении.

### Реализация

1. Парсинг TOML: Используется библиотека `toml` для чтения и парсинга входного TOML-файла. Многострочные комментарии удаляются с помощью регулярных выражений.

2. Обработка данных: Арифметические выражения (постфиксная нотация в `.[]`) вычисляются и сохраняются как константы. Значения (числа, строки, списки) преобразуются в формат `set <ключ> = <значение>`.

3. Обработка ошибок: Обрабатываются ошибки чтения файла. Выводятся сообщения об ошибках при встрече неизвестных токенов в арифметических выражениях. (Более полная обработка ошибок отсутствует).

4. Вывод: Результат выводится в стандартный поток вывода. Сохранение в файл не реализовано.

### Тестирование
Тестирование функционала пройдено успешно:

![alt text](<./images_tests/unittests.png>)



### Запуск
1. Клонировать репозиторий:

   ```html
   git clone https://github.com/vadim-white/config_3.git
   ```

2. Перейти в папку с проектом
   
   ```html
   cd config_3
   ```

3. Запустить эмулятор
   
   ```html
   python3 translator.py input.xml
   ```

4. Пример результата

![alt text](<./images_tests/test_1.png>)


